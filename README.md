# README - Docker Compose Setup for Nextcloud

This repository contains a Docker Compose setup for running Nextcloud, a self-hosted file sync and share server, along with PostgreSQL, Redis, Nginx, and an SSL certificate generator. This setup provides a secure and efficient way to deploy Nextcloud on your server. 

## Prerequisites

Before getting started, make sure you have the following prerequisites installed on your system:

- Docker: https://docs.docker.com/get-docker/
- Docker Compose: https://docs.docker.com/compose/install/
- Git: https://git-scm.com/downloads

## Getting Started

1. Clone the repository to your local machine:

   ```bash
   git clone https://github.com/williammpe/nextcloud-docker-self-hosted
   cd nextcloud-docker-self-hosted
   ```

2. Create a file named `db.env` in the root directory and add your PostgreSQL environment variables. For example:

   ```env
   POSTGRES_DB=nextcloud
   POSTGRES_USER=nextcloud
   POSTGRES_PASSWORD=yourpassword
   ```

3. Create a file named `nginx-proxy.conf` in the root directory to configure Nginx for your Nextcloud instance. You can use a sample Nginx configuration file suitable for your needs.

4. Run the following command to generate a self-signed SSL certificate:
4.1 Case you want to use FPM:
   ```bash
   docker compose -f fpm/docker-compose-certs.yaml up
   ```
4.2 Case you want to use Apache:
   ```bash
   docker compose -f apache/docker-compose-certs.yaml up
   ```

5. Build and start the Docker containers for Nextcloud and related services:
5.1 Case you want to use FPM:
   ```bash
   docker compose -f fpm/docker-compose.yaml up
   ```
5.2 Case you want to use Apache:
   ```bash
   docker compose -f apache/docker-compose.yaml up
   ```

## Access Nextcloud

Once the containers are up and running, you can access your Nextcloud instance through a web browser by navigating to `https://localhost`.

## Additional Notes

- The PostgreSQL database, Redis, and Nextcloud data are persisted using Docker volumes. You can manage these volumes using Docker commands or tools like Portainer.

- Make sure to customize the environment variables, passwords, and other configuration options in the `db.env` and `nginx-proxy.conf` files to suit your specific requirements.

- For production use, it is recommended to obtain a valid SSL certificate from a trusted certificate authority and replace the self-signed certificate generated by the `omgwtfssl` service.

- Back up your Nextcloud data regularly to prevent data loss.

- Refer to the official Nextcloud documentation (https://docs.nextcloud.com/server/latest/) for more information on configuring and using Nextcloud.

## License

This Docker Compose setup is provided as-is and is not officially maintained or endorsed by Nextcloud or any other third-party software mentioned here. Please refer to the licenses of the individual software components for more information.

## Support

If you encounter issues or have questions about this setup, you can seek help from the Docker and Nextcloud communities, or check for updates and bug fixes in this repository.
